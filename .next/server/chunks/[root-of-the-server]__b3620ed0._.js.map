{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Documents/my%20first%20web/PHASE-4/Projects/Social%20Media%20App/social-app/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst prisma = new PrismaClient({\r\n  datasources: {\r\n    db: {\r\n      url: process.env.DATABASE_URL,\r\n    },\r\n  },\r\n})\r\n\r\nexport default prisma\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,SAAS,IAAI,6HAAA,CAAA,eAAY,CAAC;IAC9B,aAAa;QACX,IAAI;YACF,KAAK,QAAQ,GAAG,CAAC,YAAY;QAC/B;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Documents/my%20first%20web/PHASE-4/Projects/Social%20Media%20App/social-app/src/app/api/auth/register/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport bcrypt from \"bcrypt\";\r\nimport prisma from \"@/lib/prisma\";\r\n\r\ninterface RegisterRequestBody {\r\n  fullName: string;\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    // Parse the request body\r\n    const body: RegisterRequestBody = await req.json();\r\n\r\n    const { fullName, username, email, password } = body;\r\n\r\n    // Basic server-side validation\r\n    if (!fullName || !username || !email || !password) {\r\n      return NextResponse.json(\r\n        { error: \"All fields are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Check if user with the same email or username already exists\r\n    const existingUser = await prisma.user.findFirst({\r\n      where: { OR: [{ email }, { username }] },\r\n    });\r\n\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { error: \"Sign up failed\" }, // generic error for user\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Hash the password\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    // Create the new user\r\n    const user = await prisma.user.create({\r\n      data: { fullName, username, email, password: hashedPassword },\r\n    });\r\n\r\n    console.log(\"New user registered:\", { fullName, username, email });\r\n\r\n    return NextResponse.json(\r\n      { message: \"User created successfully\", userId: user.id },\r\n      { status: 201 }\r\n    );\r\n  } catch (error: any) {\r\n    console.error(\"Register error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Sign up failed\" }, // generic message\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;AAAA;;;;;;AAEA;;;;AASO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,yBAAyB;QACzB,MAAM,OAA4B,MAAM,IAAI,IAAI;QAEhD,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;QAEhD,+BAA+B;QAC/B,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;YACjD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,+DAA+D;QAC/D,MAAM,eAAe,MAAM,sHAAA,CAAA,UAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAC/C,OAAO;gBAAE,IAAI;oBAAC;wBAAE;oBAAM;oBAAG;wBAAE;oBAAS;iBAAE;YAAC;QACzC;QAEA,IAAI,cAAc;YAChB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,oBAAoB;QACpB,MAAM,iBAAiB,MAAM,OAAO,IAAI,CAAC,UAAU;QAEnD,sBAAsB;QACtB,MAAM,OAAO,MAAM,sHAAA,CAAA,UAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBAAE;gBAAU;gBAAU;gBAAO,UAAU;YAAe;QAC9D;QAEA,QAAQ,GAAG,CAAC,wBAAwB;YAAE;YAAU;YAAU;QAAM;QAEhE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAA6B,QAAQ,KAAK,EAAE;QAAC,GACxD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiB,GAC1B;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}